echo "ğŸ”€ Post-merge updates..."

# Check if package.json or package-lock.json changed
if git diff --name-only HEAD@{1} HEAD | grep -qE "package(-lock)?.json"; then
    echo "ğŸ“¦ Dependencies changed, installing..."
    pnpm install
fi

# Check if .env.example changed
if git diff --name-only HEAD@{1} HEAD | grep -q ".env.example"; then
    echo "âš™ï¸  .env.example changed, please update your .env file"
fi

# Run database migrations if needed
if git diff --name-only HEAD@{1} HEAD | grep -q "migrations/"; then
    echo "ğŸ—„ï¸  New migrations detected"
    echo "Run: pnpm run migrate"
fi

# Rebuild after merge
echo "ğŸ—ï¸  Rebuilding project..."
pnpm run build

echo "âœ… Post-merge updates complete!"
